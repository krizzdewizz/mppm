<ion-header>
  <ion-toolbar>
    <ion-buttons>
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title>{{ (trackIndex < 0 ? 'C_ADD_TRACK' : 'C_EDIT_TRACK') | xlate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content scroll-y="false">
  <div class="add-track-content">
    <ion-input #nameInput clear-input [placeholder]="'C_NAME' | xlate" [(ngModel)]="track.name"></ion-input>
    <ion-input clear-input [placeholder]="'C_YT_OR_VIDEO_ID' | xlate" [(ngModel)]="track.videoUrl"></ion-input>
    <ion-icon name="search" (click)="ytSearch()"></ion-icon>
    <ion-icon name="download" [class.hidden]="!track.videoUrl" (click)="ytDownload(track.videoUrl)"></ion-icon>
    <ion-progress-bar class="progress" [class.hidden]="!downloading" type="indeterminate"></ion-progress-bar>

    <div>
      <ion-button class="choose-file" (click)="fileInput.click()">
        {{'C_LOCAL_AUDIO_FILE' | xlate}}
      </ion-button>

      <input #fileInput type="file" hidden accept="audio/*" (change)="onFileChanged($event)">
    </div>

    <ion-button class="add" [disabled]="!track.name || (!track.videoUrl && !file)" (click)="addTrack()">
      {{ (trackIndex < 0 ? 'C_ADD' : 'C_SAVE') | xlate }}</ion-button>
  </div>

</ion-content>
