<div class="header" #header>{{track?.name}}</div>

<ion-content [class.show-help]="showHelp">
    <div class="main-content">
        <div class="tools">
            <ion-button class="play-pause" (click)="playPause()">
                <ion-icon [name]="playPauseIcon"></ion-icon>
                <span class="key">space</span>
                <div class="play-position">{{playPosition}}</div>
            </ion-button>
            <ion-button class="seek-to-start" (click)="seekToStart()">
                <ion-icon name="skip-backward"></ion-icon>
                <span class="key">return</span>
            </ion-button>
            <ion-button class="backward"
                        mppmLongClick
                        (mppmClick)="backwardForward(true)"
                        (mppmClickLong)="backwardForwardLong(true)"
                        (mppmClickEnd)="longClickEnd()">
                <ion-icon name="rewind"></ion-icon>
                <span class="key">left</span>
            </ion-button>
            <ion-button class="forward"
                        mppmLongClick
                        (mppmClick)="backwardForward(false)"
                        (mppmClickLong)="backwardForwardLong(false)"
                        (mppmClickEnd)="longClickEnd()">
                <ion-icon name="fastforward"></ion-icon>
                <span class="key">right</span>
            </ion-button>
            <div class="marker-tools">
                <ion-button color="success" [disabled]="noActiveMarker" (click)="seekToActiveMarker()">
                    <ion-icon name="skip-backward"></ion-icon>
                    <span class="key">backspace</span>
                </ion-button>
                <ion-button
                        color="success"
                        [disabled]="noActiveMarker"
                        mppmLongClick
                        (mppmClick)="moveMarker(true)"
                        (mppmClickLong)="moveMarkerLong(true)"
                        (mppmClickEnd)="longClickEnd()">
                    <ion-icon name="rewind"></ion-icon>
                    <span class="key">up</span>
                </ion-button>
                <ion-button color="success"
                            [disabled]="noActiveMarker"
                            mppmLongClick
                            (mppmClick)="moveMarker(false)"
                            (mppmClickLong)="moveMarkerLong(false)"
                            (mppmClickEnd)="longClickEnd()">
                    <ion-icon name="fastforward"></ion-icon>
                    <span class="key">down</span>
                </ion-button>
                <ion-button color="success" [disabled]="isAtStart" (click)="addMarker()">
                    <ion-icon name="add"></ion-icon>
                    <span class="key">a</span>
                </ion-button>
            </div>
        </div>

        <div class="markers">
            <ion-button
                    *ngFor="let marker of markers; let markerIndex = index"
                    mppmLongClick
                    (mppmClickLong)="presentActionSheet(markerIndex)"
                    (mppmClick)="setActiveMarker(markerIndex)"
                    [class.marker-active]="activeMarker===markerIndex"
                    [color]="activeMarker===markerIndex ? undefined : 'success'">
                {{marker.value | marker}}
                <span class="marker-title">{{marker.title}}</span>
                <span class="key">{{markerIndex + 1}}</span>
            </ion-button>
        </div>

        <div class="spacer"></div>

        <div #ytplayer></div>
    </div>
</ion-content>
