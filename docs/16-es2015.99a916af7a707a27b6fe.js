(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{L6id:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J");class i{}var o=t("pMnS"),a=t("oBZk"),r=t("ZZ/e"),u=t("SVse"),c=t("DHcw"),s=t("s7LF"),b=t("mrSG"),d=t("OZIg"),p=t("eXth"),h=t("K8Gv");class f{constructor(n,l,t,e,i,o,a){this.tracksService=n,this.nav=l,this.actionSheetController=t,this.xlate=e,this.storeService=i,this.toastController=o,this.alertController=a,this.tracks=[],this.filter="",this.onDragOver=n=>n.preventDefault(),this.onDrop=n=>{n.preventDefault();const l=n.dataTransfer;if(!l.files)return;const t=l.files[0],{track:e,index:i}=this.tracksService.addFileTrack(t);this.openTrack(Object.assign({},e,{index:i,fileLost:!1}))}}get noTracks(){return 0===this.tracks.length}ionViewWillEnter(){this.updateTracks(),document.body.addEventListener("dragover",this.onDragOver),document.body.addEventListener("drop",this.onDrop)}ionViewWillLeave(){document.body.removeEventListener("dragover",this.onDragOver),document.body.removeEventListener("drop",this.onDrop)}updateTracks(){const n=this.tracksService.tracks.map((n,l)=>Object.assign({},n,{index:l,fileLost:this.isFileLost(n)})),l=this.filter.toLowerCase().trim();this.tracks=l?n.filter(n=>n.name.toLowerCase().includes(l)):n,this.tracks.sort((n,l)=>n.name.localeCompare(l.name))}onFilterChange(n){this.filter=n.target.value,this.updateTracks()}deleteTrack(n){this.tracksService.deleteTrack(n.index),this.updateTracks()}editTrack(n,l){l.close(),this.nav.navigateForward(["/add-track",n.index])}addTrack(){return b.a(this,void 0,void 0,function*(){yield this.nav.navigateForward(["/add-track",-1],{animated:!1}),yield this.nav.navigateForward("/yt-search")})}presentMenu(){return b.a(this,void 0,void 0,function*(){const n=yield this.actionSheetController.create({buttons:[this.noTracks?void 0:{text:this.xlate.transform("C_EXPORT"),handler:()=>{setTimeout(()=>this.storeService.export())}},{text:this.xlate.transform("C_IMPORT"),handler:()=>{setTimeout(()=>b.a(this,void 0,void 0,function*(){const n=yield this.import();void 0!==n&&(n?this.updateTracks():(yield this.toastController.create({message:this.xlate.transform("C_IMPORT_ERROR"),showCloseButton:!0,closeButtonText:"\u2716",duration:4e3})).present())}))}},this.noTracks?void 0:{text:this.xlate.transform("C_REMOVE_ALL_TRACKS"),handler:()=>{this.tracksService.removeAll(),this.updateTracks()}},{text:this.xlate.transform("C_INFO"),handler:()=>this.presentInfo()}].filter(Boolean)});yield n.present()})}import(){return b.a(this,void 0,void 0,function*(){return this.storeService.import(n=>new Promise(l=>b.a(this,void 0,void 0,function*(){let t,e;const i=n=>()=>{t=n,e.dismiss()};(e=yield this.alertController.create({header:this.xlate.transform("C_IMPORT_TRACKS",{countTracks:n}),buttons:[{text:this.xlate.transform("C_REPLACE"),handler:i(!0)},{text:this.xlate.transform("C_APPEND"),handler:i(!1)}]})).onDidDismiss().then(()=>l(t)),yield e.present()})))})}openTrack(n){return b.a(this,void 0,void 0,function*(){if(n.fileLost){const l=yield Object(h.b)({accept:"audio/*"});this.tracksService.tracks[n.index].file=l[0]}this.nav.navigateForward(["/track",n.index])})}presentInfo(){this.nav.navigateForward("/info")}isFileLost({isFile:n,file:l}){return n&&l&&"function"!=typeof l.slice}}var m=e.ob({encapsulation:0,styles:[["ion-item-option[_ngcontent-%COMP%]{font-size:15pt}ion-fab[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{cursor:pointer;height:56px;display:flex;position:relative;top:-20px;left:-10px}ion-fab[_ngcontent-%COMP%]   ion-fab-button[_ngcontent-%COMP%]{position:relative;left:-10px}ion-icon[name=menu][_ngcontent-%COMP%]{background-color:#fff;font-size:24pt;flex:1;position:relative;top:10px}@-webkit-keyframes pulse-animation{0%,100%,30%,50%,60%,80%{opacity:1}40%,70%{opacity:.6}}@keyframes pulse-animation{0%,100%,30%,50%,60%,80%{opacity:1}40%,70%{opacity:.6}}.file-lost[_ngcontent-%COMP%]{color:#d3d3d3}.pulse[_ngcontent-%COMP%]{-webkit-animation-name:pulse-animation;animation-name:pulse-animation;-webkit-animation-duration:4s;animation-duration:4s;transform-origin:70% 70%;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:linear;animation-timing-function:linear}.title[_ngcontent-%COMP%]{margin-top:120px;text-align:center}.add-track-info[_ngcontent-%COMP%]{margin-left:60px;margin-top:-35px;position:absolute;white-space:nowrap}.with-tracks[_ngcontent-%COMP%]{bottom:50px}"]],data:{}});function k(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,1,"h3",[["class","title"]],null,null,null,null,null)),(n()(),e.Hb(-1,null,["Musician's Practicing Player"]))],null,null)}function v(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,3,"ion-item-option",[],null,[[null,"click"]],function(n,l,t){var i=!0;return"click"===l&&(i=!1!==n.component.editTrack(n.parent.context.$implicit,e.Bb(n.parent,1))&&i),i},a.z,a.j)),e.pb(1,49152,null,0,r.J,[e.h,e.k,e.x],null,null),(n()(),e.qb(2,0,null,0,1,"ion-icon",[["name","create"]],null,null,null,a.x,a.g)),e.pb(3,49152,null,0,r.B,[e.h,e.k,e.x],{name:[0,"name"]},null)],function(n,l){n(l,3,0,"create")},null)}function x(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,14,"ion-item-sliding",[],null,null,null,a.B,a.l)),e.pb(1,49152,[["it",4]],0,r.L,[e.h,e.k,e.x],null,null),(n()(),e.qb(2,0,null,0,7,"ion-item-options",[["side","end"]],null,null,null,a.A,a.k)),e.pb(3,49152,null,0,r.K,[e.h,e.k,e.x],{side:[0,"side"]},null),(n()(),e.qb(4,0,null,0,3,"ion-item-option",[["color","danger"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.deleteTrack(n.context.$implicit)&&e),e},a.z,a.j)),e.pb(5,49152,null,0,r.J,[e.h,e.k,e.x],{color:[0,"color"]},null),(n()(),e.qb(6,0,null,0,1,"ion-icon",[["name","trash"]],null,null,null,a.x,a.g)),e.pb(7,49152,null,0,r.B,[e.h,e.k,e.x],{name:[0,"name"]},null),(n()(),e.fb(16777216,null,0,1,null,v)),e.pb(9,16384,null,0,u.j,[e.L,e.I],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(10,0,null,0,4,"ion-item",[],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.openTrack(n.context.$implicit)&&e),e},a.C,a.i)),e.pb(11,49152,null,0,r.G,[e.h,e.k,e.x],null,null),(n()(),e.qb(12,0,null,0,2,"ion-label",[],[[2,"file-lost",null]],null,null,a.D,a.m)),e.pb(13,49152,null,0,r.M,[e.h,e.k,e.x],null,null),(n()(),e.Hb(14,0,["",""]))],function(n,l){n(l,3,0,"end"),n(l,5,0,"danger"),n(l,7,0,"trash"),n(l,9,0,!l.context.$implicit.isFile)},function(n,l){n(l,12,0,l.context.$implicit.fileLost),n(l,14,0,l.context.$implicit.name)})}function g(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,2,"div",[["class","add-track-info pulse"]],null,null,null,null,null)),(n()(),e.Hb(1,null,["",""])),e.Db(2,1)],null,function(n,l){var t=e.Ib(l,1,0,n(l,2,0,e.Bb(l.parent,0),"C_ADD_TRACK"));n(l,1,0,t)})}function C(n){return e.Jb(0,[e.Cb(0,c.a,[]),(n()(),e.qb(1,0,null,null,8,"ion-header",[],[[8,"hidden",0]],null,null,a.w,a.f)),e.pb(2,49152,null,0,r.A,[e.h,e.k,e.x],null,null),(n()(),e.qb(3,0,null,0,6,"ion-toolbar",[],null,null,null,a.H,a.q)),e.pb(4,49152,null,0,r.Ab,[e.h,e.k,e.x],null,null),(n()(),e.qb(5,0,null,0,4,"ion-searchbar",[],null,[[null,"ionInput"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var i=!0,o=n.component;return"ionBlur"===l&&(i=!1!==e.Bb(n,9)._handleBlurEvent()&&i),"ionChange"===l&&(i=!1!==e.Bb(n,9)._handleInputEvent(t.target.value)&&i),"ionInput"===l&&(i=!1!==o.onFilterChange(t)&&i),i},a.F,a.o)),e.Eb(5120,null,s.b,function(n){return[n]},[r.Ib]),e.pb(7,49152,null,0,r.ib,[e.h,e.k,e.x],{placeholder:[0,"placeholder"]},null),e.Db(8,1),e.pb(9,16384,null,0,r.Ib,[e.k],null,null),(n()(),e.qb(10,0,null,null,18,"ion-content",[],null,null,null,a.t,a.c)),e.pb(11,49152,null,0,r.t,[e.h,e.k,e.x],null,null),(n()(),e.fb(16777216,null,0,1,null,k)),e.pb(13,16384,null,0,u.j,[e.L,e.I],{ngIf:[0,"ngIf"]},null),(n()(),e.qb(14,0,null,0,3,"ion-list",[],null,null,null,a.E,a.n)),e.pb(15,49152,null,0,r.N,[e.h,e.k,e.x],null,null),(n()(),e.fb(16777216,null,0,1,null,x)),e.pb(17,278528,null,0,u.i,[e.L,e.I,e.q],{ngForOf:[0,"ngForOf"]},null),(n()(),e.qb(18,0,null,0,10,"ion-fab",[["slot","fixed"]],[[2,"with-tracks",null]],null,null,a.v,a.d)),e.pb(19,49152,null,0,r.v,[e.h,e.k,e.x],{horizontal:[0,"horizontal"],vertical:[1,"vertical"]},null),(n()(),e.qb(20,0,null,0,2,"div",[["class","menu-container"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.presentMenu()&&e),e},null,null)),(n()(),e.qb(21,0,null,null,1,"ion-icon",[["name","menu"]],null,null,null,a.x,a.g)),e.pb(22,49152,null,0,r.B,[e.h,e.k,e.x],{name:[0,"name"]},null),(n()(),e.qb(23,0,null,0,3,"ion-fab-button",[],[[2,"pulse",null]],[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addTrack()&&e),e},a.u,a.e)),e.pb(24,49152,null,0,r.w,[e.h,e.k,e.x],null,null),(n()(),e.qb(25,0,null,0,1,"ion-icon",[["name","add"]],null,null,null,a.x,a.g)),e.pb(26,49152,null,0,r.B,[e.h,e.k,e.x],{name:[0,"name"]},null),(n()(),e.fb(16777216,null,0,1,null,g)),e.pb(28,16384,null,0,u.j,[e.L,e.I],{ngIf:[0,"ngIf"]},null)],function(n,l){var t=l.component,i=e.Ib(l,7,0,n(l,8,0,e.Bb(l,0),"C_SEARCH"));n(l,7,0,i),n(l,13,0,t.noTracks),n(l,17,0,t.tracks),n(l,19,0,t.noTracks?"center":"end",t.noTracks?"center":"bottom"),n(l,22,0,"menu"),n(l,26,0,"add"),n(l,28,0,t.noTracks)},function(n,l){var t=l.component;n(l,1,0,t.noTracks),n(l,18,0,!t.noTracks),n(l,23,0,t.noTracks)})}function T(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,1,"app-home",[],null,null,null,C,m)),e.pb(1,49152,null,0,f,[d.a,r.Fb,r.a,c.a,p.a,r.Jb,r.b],null,null)],null,null)}var w=e.mb("app-home",f,T,{},{},[]),_=t("a6Df"),O=t("iInd");t.d(l,"HomePageModuleNgFactory",function(){return y});var y=e.nb(i,[],function(n){return e.yb([e.zb(512,e.j,e.Y,[[8,[o.a,w]],[3,e.j],e.v]),e.zb(4608,u.l,u.k,[e.s,[2,u.r]]),e.zb(4608,s.g,s.g,[]),e.zb(4608,r.c,r.c,[e.x,e.g]),e.zb(4608,r.Eb,r.Eb,[r.c,e.j,e.p]),e.zb(4608,r.Hb,r.Hb,[r.c,e.j,e.p]),e.zb(1073742336,u.b,u.b,[]),e.zb(1073742336,_.a,_.a,[]),e.zb(1073742336,s.f,s.f,[]),e.zb(1073742336,s.a,s.a,[]),e.zb(1073742336,r.Cb,r.Cb,[]),e.zb(1073742336,O.n,O.n,[[2,O.s],[2,O.m]]),e.zb(1073742336,i,i,[]),e.zb(1024,O.k,function(){return[[{path:"",component:f}]]},[])])})}}]);