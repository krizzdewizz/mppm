(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{r1hw:function(n,l,t){"use strict";t.r(l);var e=t("8Y7J"),a=t("mrSG"),i=t("ZZ/e"),o=t("OZIg"),u=t("/kET"),c=t("3Nzo"),r=t("277d"),d=t("DHcw");class s{constructor(n,l,t,e,a,i){this.activatedRoute=n,this.tracksService=l,this.nav=t,this.toastController=e,this.xlate=a,this.ytDownloadService=i}ngOnInit(){if(this.trackIndex=Number(this.activatedRoute.snapshot.paramMap.get("index")),this.track={name:"",videoUrl:"",markers:[]},-1!==this.trackIndex){const n=this.tracksService.tracks[this.trackIndex];this.track.name=n.name,this.track.videoUrl=n.videoUrl}}ionViewWillEnter(){const n=Object(u.a)();n&&(this.track.videoUrl=n.id.videoId,this.track.name||(this.track.name=n.snippet.title),Object(u.b)(void 0))}addTrack(){let n=!1;if(this.file)this.tracksService.addFileTrack(this.file,this.track.name),n=!0;else{if(-1!==this.trackIndex){const n=this.tracksService.tracks[this.trackIndex];n.name=this.track.name,n.videoUrl=this.track.videoUrl}else n=!0,this.tracksService.tracks.push(Object.assign({},this.track));this.tracksService.saveTracks()}setTimeout(()=>{const l=this.nav.pop();n&&l.then(()=>this.nav.navigateRoot(["/track",this.tracksService.tracks.length-1]))})}ytSearch(){this.nav.navigateForward("/yt-search")}onFileChanged(n){this.file=n.target.files[0],this.track.name=this.file.name}ytDownload(n){return a.a(this,void 0,void 0,function*(){this.downloading||(this.downloading=!0,(yield this.ytDownloadService.initateDownload(Object(r.a)(n)))||(yield this.toastController.create({message:this.xlate.transform("C_YT_DOWNLOAD_ERROR"),showCloseButton:!0,closeButtonText:"\u2716",duration:4e3})).present(),this.downloading=!1)})}}class b{}var g=t("pMnS"),h=t("oBZk"),p=t("s7LF"),k=t("iInd"),v=e.ob({encapsulation:0,styles:[[".add-track-content[_ngcontent-%COMP%]{padding:16px;display:grid;grid-template-columns:auto 35px}.add-track-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{grid-column:1}.add-track-content[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]:nth-child(2){color:#aaa}.add-track-content[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{grid-column:2;justify-self:end;font-size:25pt;position:relative;top:-35px;cursor:pointer}.add-track-content[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{grid-column:2;justify-self:end;position:relative;top:-35px}.add-track-content[_ngcontent-%COMP%]   .progress.hidden[_ngcontent-%COMP%]{visibility:hidden}.add-track-content[_ngcontent-%COMP%]   ion-icon[name=search][_ngcontent-%COMP%]{color:#aaa}.add-track-content[_ngcontent-%COMP%]   ion-icon[name=download][_ngcontent-%COMP%]{position:relative;top:-37px;color:var(--ion-color-primary);cursor:pointer}.add-track-content[_ngcontent-%COMP%]   ion-icon[name=download].hidden[_ngcontent-%COMP%]{visibility:hidden}.add-track-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{grid-column:1/3}.add[_ngcontent-%COMP%]{margin-top:20px}.local-audio-file[_ngcontent-%COMP%]{margin-top:35px;font-size:smaller}.local-audio-file[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:4px}"]],data:{}});function C(n){return e.Jb(0,[e.Cb(0,d.a,[]),(n()(),e.qb(1,0,null,null,7,"ion-header",[],null,null,null,h.x,h.f)),e.pb(2,49152,null,0,i.A,[e.h,e.k,e.x],null,null),(n()(),e.qb(3,0,null,0,5,"ion-toolbar",[],null,null,null,h.J,h.r)),e.pb(4,49152,null,0,i.Ab,[e.h,e.k,e.x],null,null),(n()(),e.qb(5,0,null,0,3,"ion-title",[],null,null,null,h.I,h.q)),e.pb(6,49152,null,0,i.yb,[e.h,e.k,e.x],null,null),(n()(),e.Hb(7,0,["",""])),e.Db(8,1),(n()(),e.qb(9,0,null,null,33,"ion-content",[],null,null,null,h.u,h.c)),e.pb(10,49152,null,0,i.t,[e.h,e.k,e.x],null,null),(n()(),e.qb(11,0,null,0,31,"div",[["class","add-track-content"]],null,null,null,null,null)),(n()(),e.qb(12,0,null,null,7,"ion-input",[["clear-input",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var a=!0,i=n.component;return"ionBlur"===l&&(a=!1!==e.Bb(n,13)._handleBlurEvent()&&a),"ionChange"===l&&(a=!1!==e.Bb(n,13)._handleInputEvent(t.target.value)&&a),"ngModelChange"===l&&(a=!1!==(i.track.name=t)&&a),a},h.z,h.h)),e.pb(13,16384,null,0,i.Ib,[e.k],null,null),e.Eb(1024,null,p.b,function(n){return[n]},[i.Ib]),e.pb(15,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,p.c,null,[p.e]),e.pb(17,16384,null,0,p.d,[[4,p.c]],null,null),e.pb(18,49152,null,0,i.F,[e.h,e.k,e.x],{placeholder:[0,"placeholder"]},null),e.Db(19,1),(n()(),e.qb(20,0,null,null,7,"ion-input",[["clear-input",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],function(n,l,t){var a=!0,i=n.component;return"ionBlur"===l&&(a=!1!==e.Bb(n,21)._handleBlurEvent()&&a),"ionChange"===l&&(a=!1!==e.Bb(n,21)._handleInputEvent(t.target.value)&&a),"ngModelChange"===l&&(a=!1!==(i.track.videoUrl=t)&&a),a},h.z,h.h)),e.pb(21,16384,null,0,i.Ib,[e.k],null,null),e.Eb(1024,null,p.b,function(n){return[n]},[i.Ib]),e.pb(23,671744,null,0,p.e,[[8,null],[8,null],[8,null],[6,p.b]],{model:[0,"model"]},{update:"ngModelChange"}),e.Eb(2048,null,p.c,null,[p.e]),e.pb(25,16384,null,0,p.d,[[4,p.c]],null,null),e.pb(26,49152,null,0,i.F,[e.h,e.k,e.x],{placeholder:[0,"placeholder"]},null),e.Db(27,1),(n()(),e.qb(28,0,null,null,1,"ion-icon",[["name","search"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.ytSearch()&&e),e},h.y,h.g)),e.pb(29,49152,null,0,i.B,[e.h,e.k,e.x],{name:[0,"name"]},null),(n()(),e.qb(30,0,null,null,1,"ion-icon",[["name","download"]],[[2,"hidden",null]],[[null,"click"]],function(n,l,t){var e=!0,a=n.component;return"click"===l&&(e=!1!==a.ytDownload(a.track.videoUrl)&&e),e},h.y,h.g)),e.pb(31,49152,null,0,i.B,[e.h,e.k,e.x],{name:[0,"name"]},null),(n()(),e.qb(32,0,null,null,1,"ion-progress-bar",[["class","progress"],["type","indeterminate"]],[[2,"hidden",null]],null,null,h.G,h.o)),e.pb(33,49152,null,0,i.X,[e.h,e.k,e.x],{type:[0,"type"]},null),(n()(),e.qb(34,0,null,null,3,"ion-button",[["class","add"]],null,[[null,"click"]],function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.addTrack()&&e),e},h.t,h.b)),e.pb(35,49152,null,0,i.j,[e.h,e.k,e.x],{disabled:[0,"disabled"]},null),(n()(),e.Hb(36,0,[" ",""])),e.Db(37,1),(n()(),e.qb(38,0,null,null,4,"div",[["class","local-audio-file"]],null,null,null,null,null)),(n()(),e.qb(39,0,null,null,2,"label",[],null,null,null,null,null)),(n()(),e.Hb(40,null,["",""])),e.Db(41,1),(n()(),e.qb(42,0,null,null,0,"input",[["accept","audio/*"],["type","file"]],null,[[null,"change"]],function(n,l,t){var e=!0;return"change"===l&&(e=!1!==n.component.onFileChanged(t)&&e),e},null,null))],function(n,l){var t=l.component;n(l,15,0,t.track.name);var a=e.Ib(l,18,0,n(l,19,0,e.Bb(l,0),"C_NAME"));n(l,18,0,a),n(l,23,0,t.track.videoUrl);var i=e.Ib(l,26,0,n(l,27,0,e.Bb(l,0),"C_YT_OR_VIDEO_ID"));n(l,26,0,i),n(l,29,0,"search"),n(l,31,0,"download"),n(l,33,0,"indeterminate"),n(l,35,0,!t.track.name||!t.track.videoUrl&&!t.file)},function(n,l){var t=l.component,a=e.Ib(l,7,0,n(l,8,0,e.Bb(l,0),t.trackIndex<0?"C_ADD_TRACK":"C_EDIT_TRACK"));n(l,7,0,a),n(l,12,0,e.Bb(l,17).ngClassUntouched,e.Bb(l,17).ngClassTouched,e.Bb(l,17).ngClassPristine,e.Bb(l,17).ngClassDirty,e.Bb(l,17).ngClassValid,e.Bb(l,17).ngClassInvalid,e.Bb(l,17).ngClassPending),n(l,20,0,e.Bb(l,25).ngClassUntouched,e.Bb(l,25).ngClassTouched,e.Bb(l,25).ngClassPristine,e.Bb(l,25).ngClassDirty,e.Bb(l,25).ngClassValid,e.Bb(l,25).ngClassInvalid,e.Bb(l,25).ngClassPending),n(l,30,0,!t.track.videoUrl),n(l,32,0,!t.downloading);var i=e.Ib(l,36,0,n(l,37,0,e.Bb(l,0),t.trackIndex<0?"C_ADD":"C_SAVE"));n(l,36,0,i);var o=e.Ib(l,40,0,n(l,41,0,e.Bb(l,0),"C_LOCAL_AUDIO_FILE"));n(l,40,0,o)})}function m(n){return e.Jb(0,[(n()(),e.qb(0,0,null,null,1,"app-add-track",[],null,null,null,C,v)),e.pb(1,114688,null,0,s,[k.a,o.a,i.Fb,i.Jb,d.a,c.a],null,null)],function(n,l){n(l,1,0)},null)}var _=e.mb("app-add-track",s,m,{},{},[]),f=t("SVse"),O=t("a6Df");t.d(l,"AddTrackPageModuleNgFactory",function(){return B});var B=e.nb(b,[],function(n){return e.yb([e.zb(512,e.j,e.Y,[[8,[g.a,_]],[3,e.j],e.v]),e.zb(4608,f.l,f.k,[e.s,[2,f.r]]),e.zb(4608,p.g,p.g,[]),e.zb(4608,i.c,i.c,[e.x,e.g]),e.zb(4608,i.Eb,i.Eb,[i.c,e.j,e.p]),e.zb(4608,i.Hb,i.Hb,[i.c,e.j,e.p]),e.zb(1073742336,f.b,f.b,[]),e.zb(1073742336,O.a,O.a,[]),e.zb(1073742336,p.f,p.f,[]),e.zb(1073742336,p.a,p.a,[]),e.zb(1073742336,i.Cb,i.Cb,[]),e.zb(1073742336,k.n,k.n,[[2,k.s],[2,k.m]]),e.zb(1073742336,b,b,[]),e.zb(1024,k.k,function(){return[[{path:"",component:s}]]},[])])})}}]);